"use strict";angular.module("dashboardIotApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"ctrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("dashboardIotApp").controller("MainCtrl",["$http",function(a){var b=this;b.model={};var c=function(){a.get("http://iab-server.herokuapp.com/api/calls/unattended").then(function(a){b.model.unattendedCalls=a.data}),a.get("http://iab-server.herokuapp.com/api/calls/attended").then(function(a){b.model.attendedCalls=a.data})};c(),setInterval(function(){c()},5e3),b.formatDate=function(a){a=new Date(a);var b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear(),e=b+"/"+c+"/"+d;return e=e+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()},b.isNotAttended=function(a){return!a.attended&&void 0===a.attendedBy},b.isAssigned=function(a){return!a.attended&&void 0!==a.attendedBy},b.isAttended=function(a){return a.attended}}]),angular.module("dashboardIotApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("dashboardIotApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="jumbotron row"> <div class="col-md-6"> <p> Chamados Não Atendidos <table class="table"> <thead> <tr> <th class="text-center">Local</th> <th class="text-center">Data do Chamado</th> <th class="text-center">Prioridade</th> <th class="text-center">Responsável</th> <th class="text-center">Status</th> </tr> </thead> <tbody ng-repeat="call in ctrl.model.unattendedCalls"> <tr> <td style="vertical-align: middle">{{call.location}}</td> <td style="vertical-align: middle">{{ctrl.formatDate(call.moment)}}</td> <td style="color: red; vertical-align: middle" ng-if="call.priority"><strong>Alta</strong></td> <td style="vertical-align: middle" ng-if="!call.priority">Baixa</td> <td style="vertical-align: middle" ng-if="call.attendedBy">{{call.attendedBy}}</td> <td style="vertical-align: middle" ng-if="!call.attendedBy">-</td> <td ng-if="ctrl.isAttended(call)"> <div class="alert alert-success" role="alert"> <strong>Atendido</strong> </div> </td> <td ng-if="ctrl.isAssigned(call)"> <div class="alert alert-warning" role="alert"> <strong>Atribuído</strong> </div> </td> <td ng-if="ctrl.isNotAttended(call)"> <div class="alert alert-danger" role="alert"> <strong>Pendente</strong> </div> </td> </tr> </tbody> </table> </p> </div> <div class="col-md-6"> <p> Chamados Atendidos <table class="table"> <thead> <tr> <th class="text-center">Local</th> <th class="text-center">Atendido por</th> <th class="text-center">Data da Resposta</th> <th class="text-center">Prioridade</th> <th class="text-center">Status</th> </tr> </thead> <tbody ng-repeat="call in ctrl.model.attendedCalls"> <tr> <td style="vertical-align: middle">{{call.location}}</td> <td style="vertical-align: middle">{{call.attendedBy}}</td> <td style="vertical-align: middle">{{ctrl.formatDate(call.attendedTime)}}</td> <td style="color: red; vertical-align: middle" ng-if="call.priority"><strong>Alta</strong></td> <td style="vertical-align: middle" ng-if="!call.priority">Baixa</td> <td ng-if="ctrl.isAttended(call)"> <div class="alert alert-success" role="alert"> <strong>Atendido</strong> </div> </td> <td ng-if="ctrl.isNotAttended(call)"> <div class="alert alert-danger" role="alert"> <strong>Pendente</strong> </div> </td> </tr> </tbody> </table> </p> </div> </div>')}]);